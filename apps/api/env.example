# ===========================================
# RYLA Backend API - Environment Configuration
# ===========================================
# This file is for the NestJS backend API (apps/api)
# Copy to apps/api/.env or set as environment variables
# NEVER commit .env files to version control
# ===========================================

# -------------------------------------------
# Application
# -------------------------------------------
APP_PORT=3001
APP_HOST=localhost
APP_ENVIRONMENT=local

# -------------------------------------------
# PostgreSQL Database
# -------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=admin
POSTGRES_PASSWORD=
POSTGRES_DB=ryla
POSTGRES_ENVIRONMENT=local

# -------------------------------------------
# Redis
# -------------------------------------------
# Option 1: Use REDIS_URL (recommended for Fly.io/Upstash)
# Format: redis://username:password@host:port or rediss://username:password@host:port
# Example: redis://default:password123@redis.example.com:6379
# Example: rediss://default:password123@upstash.io:6379 (TLS)
REDIS_URL=

# Option 2: Use individual variables (fallback if REDIS_URL not set)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_ENVIRONMENT=local

# -------------------------------------------
# JWT Authentication
# -------------------------------------------
JWT_ACCESS_SECRET=your-super-secret-jwt-access-key-change-in-production
JWT_REFRESH_SECRET=your-super-secret-jwt-refresh-key-change-in-production
JWT_ACCESS_EXPIRES_IN=3600
JWT_REFRESH_EXPIRES_IN=86400
JWT_ACTION_FORGOT_PASSWORD_SECRET=your-forgot-password-secret-key
JWT_ACTION_FORGOT_PASSWORD_EXPIRES_IN=3600

# -------------------------------------------
# S3 Storage (AWS S3 or MinIO)
# -------------------------------------------
AWS_S3_REGION=us-east-1
AWS_S3_ACCESS_KEY=
AWS_S3_SECRET_KEY=
AWS_S3_BUCKET_NAME=ryla-images
# Default presigned URL TTL (seconds). In dev we keep this higher to reduce churn.
# IMPORTANT: app code should not persist presigned URLs in DB; always sign on read.
AWS_S3_URL_TTL=86400

# MinIO/S3-compatible storage (for local development)
# Set these when using docker-compose MinIO:
#   AWS_S3_ENDPOINT=http://localhost:9000
#   AWS_S3_ACCESS_KEY=ryla_minio
#   AWS_S3_SECRET_KEY=ryla_minio_secret
#   AWS_S3_FORCE_PATH_STYLE=true
AWS_S3_ENDPOINT=
AWS_S3_FORCE_PATH_STYLE=false

# -------------------------------------------
# Brevo (Email Service)
# -------------------------------------------
BREVO_API_KEY=
BREVO_API_URL=https://api.brevo.com/v3

# -------------------------------------------
# Swagger Documentation
# -------------------------------------------
SWAGGER_PASSWORD=admin

# -------------------------------------------
# Google OAuth (Optional - for future)
# -------------------------------------------
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
AUTH_REDIRECT_URI=

# -------------------------------------------
# RunPod (AI Image Generation)
# -------------------------------------------
RUNPOD_API_KEY=
RUNPOD_ENDPOINT_FLUX_DEV=jpcxjab2zpro19
RUNPOD_ENDPOINT_Z_IMAGE_TURBO=xqs8k7yhabwh0k

# -------------------------------------------
# OpenRouter (LLM Prompt Enhancement)
# -------------------------------------------
# Unified API for 500+ LLM models across 60+ providers
# Better prices, better uptime, automatic fallback
# Get API key: https://openrouter.ai/
OPENROUTER_API_KEY=
# Default model (e.g., 'openai/gpt-4o-mini', 'deepseek/deepseek-chat', 'qwen/qwen-2.5-72b-instruct')
# Recommended: 'deepseek/deepseek-chat' for cost savings, 'openai/gpt-4o-mini' for quality
OPENROUTER_DEFAULT_MODEL=openai/gpt-4o-mini

# -------------------------------------------
# Direct LLM APIs (Fallback for Prompt Enhancement)
# -------------------------------------------
# These are used as fallback if OpenRouter is unavailable
GEMINI_API_KEY=
OPENAI_API_KEY=

# -------------------------------------------
# Cron Jobs (Scheduled Tasks)
# -------------------------------------------
# Secret token for authenticating cron job requests
# Generate with: openssl rand -hex 32
CRON_SECRET=

