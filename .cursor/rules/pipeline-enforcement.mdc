---
description: Enforces 10-phase MVP pipeline - AI must follow strictly
alwaysApply: true
---

# Pipeline Enforcement

## Core Rule
You MUST follow the 10-phase pipeline. Never skip phases. Never guess missing inputs.

## Tech Stack
- Frontend: Next.js + React + TypeScript
- Backend: Next.js API routes / Node.js
- DB: Supabase / Postgres
- Infra: GitHub Actions
- Tests: Vitest + Playwright
- Analytics: PostHog

## Working Rules (EVERY TASK)

### 1. State Current Phase
```
Working in PHASE X – [NAME] on Initiative IN-XXX, Epic EP-XXX, Story ST-XXX.
```

**Note**: If epic is part of an initiative, include initiative ID. If no initiative, omit it.

### 2. Check Inputs
List inputs used. If missing → STOP and ask.

**If working on Epic/Story:**
- Check if epic is part of an Initiative (IN-XXX)
- If yes, read initiative document to understand context and success criteria
- Ensure work aligns with initiative goals

### 3. Plan Before Coding
Outline steps + files to change. No giant rewrites.

### 4. Implement Small Patches
Focused changes. One concern at a time.

### 5. Self-Review
Check for bugs, type errors, spec mismatch.

### 6. Acceptance Criteria Status
```
[ACCEPTANCE CRITERIA STATUS]
1. {Criterion}: ✅/⚠️/❌ – explanation
2. {Criterion}: ✅/⚠️/❌ – explanation
```

### 7. Next Step
Suggest concrete next action or phase.

### 8. Update Epic/Initiative Status
When completing phases or making progress, update status:

**Epic Status Values:**
- **Proposed** - Requirements/scoping complete (P1-P2)
- **In Progress** - Architecture/implementation (P3-P6)
- **In Review** - Testing/deployment (P7-P9)
- **Completed** - Production validated (P10 complete)
- **On Hold** - Temporarily paused
- **Cancelled** - Abandoned

**Update epic status:**
1. Update status field at top of epic file
2. Update README status column in epic directory
3. Update phase field if phase changed
4. Update "Last Updated" date

**Initiative Status Values:**
- **Proposed** - Template filled, not started
- **Active** - Driving current work
- **On Hold** - Temporarily paused
- **Completed** - Success criteria met
- **Cancelled** - Abandoned

**Update initiative status:**
1. Update status field at top of initiative file
2. Update README index table
3. Update Progress Tracking section
4. Update "Last Updated" date

See `docs/process/EPIC-STATUS-TRACKING.md` for full guidelines.

## Phase Quick Reference

| Phase | Required Inputs | Required Outputs |
|-------|----------------|------------------|
| P1 | Business idea, constraints | Problem statement, MVP objective, non-goals |
| P2 | Problem + objective | Features, epics, acceptance criteria |
| P3 | Epics + AC | Architecture, data model, API contracts |
| P4 | Stories + architecture | Screens, navigation, interactions |
| P5 | Architecture + UI | File plan, tech spec, task breakdown |
| P6 | Task + file plan | Code, self-review, AC status |
| P7 | Code + AC | Tests, test-to-AC mapping |
| P8 | Code + tests | Integration notes, fixes |
| P9 | Stable code | CI/CD, env vars, deploy checklist |
| P10 | Deployed app | Smoke tests, learnings, next steps, journey docs verified |

## Blocking Rules
- Missing inputs → STOP, ask user
- Missing previous phase outputs → produce them OR ask user
- Vague requirements → ask clarifying questions
- Cannot meet AC → state why, what's missing
