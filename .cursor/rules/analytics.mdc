---
description: Analytics and metrics tracking guidelines
globs: ["libs/analytics/**", "apps/**"]
alwaysApply: false
---

# Analytics

## Location
`libs/analytics/src/`

## Import
```typescript
import { capture, identify, USER_EVENTS } from '@ryla/analytics';
```

## Key Events

| Event | When | Properties |
|-------|------|------------|
| `user.signed_up` | Registration | source, plan |
| `user.activated` | First key action | time_to_activate |
| `feature.used` | Feature interaction | feature, count |
| `subscription.created` | Payment | plan, amount |
| `error.occurred` | User-facing error | type, message |

## Usage
```typescript
import { capture, identify, USER_EVENTS } from '@ryla/analytics';

// Identify user
identify(userId, { email, plan });

// Capture event
capture(USER_EVENTS.ACTIVATED, { 
  time_to_activate: 120 
});
```

## Event Naming
- snake_case
- feature.action format
- Consistent across app

## Metrics (A-E)
- A: Activation
- B: Retention
- C: Core Value
- D: Conversion
- E: CAC
