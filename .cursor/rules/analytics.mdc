---
description: Analytics and metrics tracking guidelines
globs: ["src/**"]
alwaysApply: false
---

# Analytics

## Key Events

| Event | When | Properties |
|-------|------|------------|
| `user_signed_up` | Registration | source, plan |
| `user_activated` | First key action | time_to_activate |
| `feature_used` | Feature interaction | feature, count |
| `user_converted` | Paid subscription | plan, trial_days |
| `error_occurred` | User-facing error | type, message |

## Event Naming
- snake_case
- verb_noun format
- Consistent across app

## Metrics
- **Acquisition**: signup rate, activation rate, trial conversion
- **Retention**: D1/D7/D30, churn rate, feature adoption
- **Revenue**: MRR, ARPU, LTV, CAC, LTV:CAC

## Implementation
```javascript
posthog.identify(userId, { email, plan });
posthog.capture('feature_used', { feature: 'export', format: 'pdf' });
if (posthog.isFeatureEnabled('new-feature')) { /* show */ }
```
